{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\naoui\\\\Desktop\\\\RE1\\\\real-estate\\\\client\\\\src\\\\Pages\\\\AdminArea\\\\AdminArea.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { PieChart, Pie, Cell, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend } from 'recharts';\nimport { MDBBadge, MDBRow, MDBCol, MDBListGroup, MDBListGroupItem, MDBContainer } from 'mdbreact';\nimport Nav from \"../../components/Nav/Nav\";\nimport \"./AdminArea.css\";\nimport API from \"../../utils/API\";\nconst COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042'];\nconst RADIAN = Math.PI / 180;\n\nconst renderCustomizedLabel = ({\n  cx,\n  cy,\n  midAngle,\n  innerRadius,\n  outerRadius,\n  percent,\n  index\n}) => {\n  const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\n  const x = cx + radius * Math.cos(-midAngle * RADIAN);\n  const y = cy + radius * Math.sin(-midAngle * RADIAN);\n  return /*#__PURE__*/React.createElement(\"text\", {\n    x: x,\n    y: y,\n    fill: \"white\",\n    textAnchor: x > cx ? 'start' : 'end',\n    dominantBaseline: \"central\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 9\n    }\n  }, `${(percent * 100).toFixed(0)}%`);\n};\n\nfunction AdminArea() {\n  const [properties, setProperties] = useState([]);\n  const [_users, setUsers] = useState([]);\n  const [pieData, setPieData] = useState({}); // Loads top properties\n\n  useEffect(() => {\n    loadProperties();\n    getUsers();\n  }, []); // Loader\n\n  function loadProperties() {\n    console.log(\"Test property function\");\n    API.getTopProperties(3).then(payloadFromApiCall => {\n      const theProperties = payloadFromApiCall.data;\n      console.log(\"the top x properties\", theProperties);\n      let ourBarData = [];\n\n      for (let oneProperty of theProperties) {\n        ourBarData.push({\n          name: oneProperty.address,\n          listprice: oneProperty.listPrice\n        });\n      }\n\n      setProperties(ourBarData);\n    }).catch(err => console.log(err));\n  }\n\n  ;\n\n  function diffDates(date1, date2) {\n    let Difference_In_Time = date2.getTime() - date1.getTime();\n    let Difference_In_Days = Difference_In_Time / (1000 * 3600 * 24);\n    return Math.floor(Difference_In_Days);\n  }\n\n  function getUsers() {\n    console.log(\"Test User function\");\n    API.getUsers().then(payloadFromApiCall => {\n      const theUsers = payloadFromApiCall.data;\n      console.log(\"the top x users\", theUsers);\n      setUsers(theUsers);\n      let userDates = {\n        'Last 7 Days': 0,\n        '7 - 14 Days Ago': 0,\n        'Over 2 Weeks Ago': 0,\n        'Over 1 Month Ago': 0\n      };\n\n      for (let user of theUsers) {\n        let Difference_In_Days = diffDates(new Date(Date.parse(user.lastLogin)), new Date());\n\n        if (Difference_In_Days <= 7) {\n          userDates['Last 7 Days'] = userDates['Last 7 Days'] + 1;\n        } else if (Difference_In_Days > 7 || Difference_In_Days <= 14) {\n          userDates['7 - 14 Days Ago'] = userDates['7 - 14 Days Ago'] + 1;\n        } else if (Difference_In_Days > 14 || Difference_In_Days <= 30) {\n          userDates['Over 2 Weeks Ago'] = userDates['Over 2 Weeks Ago'] + 1;\n        } else {\n          userDates['Over 1 Month Ago'] = userDates['Over 1 Month Ago'] + 1;\n        }\n      }\n\n      console.log(\"setPieData\", userDates);\n      setPieData(userDates);\n    }).catch(err => console.log(err));\n  }\n\n  ;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Nav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(MDBContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MDBRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MDBCol, {\n    className: \"align-items-center p-2\",\n    sm: \"12\",\n    md: \"6\",\n    lg: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"userStats align-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 25\n    }\n  }, \"User List\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(MDBListGroup, {\n    className: \"d-flex\",\n    style: {\n      width: \"16rem\",\n      margin: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 29\n    }\n  }, _users.map(user => /*#__PURE__*/React.createElement(MDBListGroupItem, {\n    key: user._id,\n    href: \"/users/\" + user._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 41\n    }\n  }, user.firstName, \" \", user.lastName))))), /*#__PURE__*/React.createElement(MDBCol, {\n    className: \"align-items-center p-2\",\n    sm: \"12\",\n    md: \"6\",\n    lg: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"userStats align-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, \"User Activity\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(MDBListGroup, {\n    style: {\n      width: \"22rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(MDBListGroupItem, {\n    className: \"d-flex justify-content-between align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 33\n    }\n  }, \"Last 7 Days\", /*#__PURE__*/React.createElement(MDBBadge, {\n    color: \"primary\",\n    pill: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 29\n    }\n  }, pieData['Last 7 Days'])), /*#__PURE__*/React.createElement(MDBListGroupItem, {\n    className: \"d-flex justify-content-between align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 33\n    }\n  }, \"7 - 14 Days Ago\", /*#__PURE__*/React.createElement(MDBBadge, {\n    color: \"primary\",\n    pill: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 29\n    }\n  }, pieData['7 - 14 Days Ago'])), /*#__PURE__*/React.createElement(MDBListGroupItem, {\n    className: \"d-flex justify-content-between align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 33\n    }\n  }, \"Over 2 Weeks Ago\", /*#__PURE__*/React.createElement(MDBBadge, {\n    color: \"primary\",\n    pill: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  }, pieData['Over 2 Weeks Ago'])), /*#__PURE__*/React.createElement(MDBListGroupItem, {\n    className: \"d-flex justify-content-between align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 33\n    }\n  }, \"Over 1 Month Ago\", /*#__PURE__*/React.createElement(MDBBadge, {\n    color: \"primary\",\n    pill: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 34\n    }\n  }, pieData['Over 1 Month Ago']))))), /*#__PURE__*/React.createElement(MDBCol, {\n    className: \"text-center p-2\",\n    md: \"12\",\n    lg: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"userStats ml-4 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 25\n    }\n  }, \"Top Saved Properties\"), /*#__PURE__*/React.createElement(BarChart, {\n    width: 450,\n    height: 400,\n    data: properties,\n    margin: {\n      top: 5,\n      right: 30,\n      left: 20,\n      bottom: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(CartesianGrid, {\n    strokeDasharray: \"3 3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(XAxis, {\n    dataKey: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(YAxis, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Tooltip, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Legend, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Bar, {\n    dataKey: \"listprice\",\n    fill: \"#8884d8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 29\n    }\n  }))))));\n}\n\nexport default AdminArea;","map":{"version":3,"sources":["C:/Users/naoui/Desktop/RE1/real-estate/client/src/Pages/AdminArea/AdminArea.js"],"names":["React","useState","useEffect","PieChart","Pie","Cell","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","MDBBadge","MDBRow","MDBCol","MDBListGroup","MDBListGroupItem","MDBContainer","Nav","API","COLORS","RADIAN","Math","PI","renderCustomizedLabel","cx","cy","midAngle","innerRadius","outerRadius","percent","index","radius","x","cos","y","sin","toFixed","AdminArea","properties","setProperties","_users","setUsers","pieData","setPieData","loadProperties","getUsers","console","log","getTopProperties","then","payloadFromApiCall","theProperties","data","ourBarData","oneProperty","push","name","address","listprice","listPrice","catch","err","diffDates","date1","date2","Difference_In_Time","getTime","Difference_In_Days","floor","theUsers","userDates","user","Date","parse","lastLogin","width","margin","map","_id","firstName","lastName","top","right","left","bottom"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { PieChart, Pie, Cell, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend } from 'recharts';\r\nimport { MDBBadge, MDBRow, MDBCol, MDBListGroup, MDBListGroupItem, MDBContainer } from 'mdbreact';\r\nimport Nav from \"../../components/Nav/Nav\";\r\nimport \"./AdminArea.css\";\r\nimport API from \"../../utils/API\";\r\n\r\n\r\nconst COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042'];\r\nconst RADIAN = Math.PI / 180;\r\nconst renderCustomizedLabel = ({\r\n    cx, cy, midAngle, innerRadius, outerRadius, percent, index,\r\n}) => {\r\n    const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\r\n    const x = cx + radius * Math.cos(-midAngle * RADIAN);\r\n    const y = cy + radius * Math.sin(-midAngle * RADIAN);\r\n\r\n    return (\r\n        <text x={x} y={y} fill=\"white\" textAnchor={x > cx ? 'start' : 'end'} dominantBaseline=\"central\">\r\n            {`${(percent * 100).toFixed(0)}%`}\r\n        </text>\r\n    );\r\n};\r\n\r\nfunction AdminArea() {\r\n\r\n    const [properties, setProperties] = useState([]);\r\n    const [_users, setUsers] = useState([]);\r\n    const [pieData, setPieData] = useState({});\r\n\r\n    // Loads top properties\r\n    useEffect(() => {\r\n        loadProperties();\r\n        getUsers();\r\n    }, []);\r\n\r\n    // Loader\r\n    function loadProperties() {\r\n        console.log(\"Test property function\");\r\n        API.getTopProperties(3)\r\n            .then(payloadFromApiCall => {\r\n                const theProperties = payloadFromApiCall.data;\r\n                console.log(\"the top x properties\", theProperties);\r\n                let ourBarData = [];\r\n                for (let oneProperty of theProperties) {\r\n                    ourBarData.push({ name: oneProperty.address, listprice: oneProperty.listPrice });\r\n                }\r\n                setProperties(ourBarData);\r\n\r\n            })\r\n            .catch(err => console.log(err));\r\n    };\r\n\r\n    function diffDates(date1, date2) {\r\n        let Difference_In_Time = date2.getTime() - date1.getTime();\r\n        let Difference_In_Days = Difference_In_Time / (1000 * 3600 * 24);\r\n        return (Math.floor(Difference_In_Days));\r\n    }\r\n\r\n    function getUsers() {\r\n        console.log(\"Test User function\");\r\n        API.getUsers()\r\n            .then(payloadFromApiCall => {\r\n                const theUsers = payloadFromApiCall.data;\r\n                console.log(\"the top x users\", theUsers);\r\n                setUsers(theUsers);\r\n\r\n                let userDates = {\r\n\r\n                    'Last 7 Days': 0,\r\n                    '7 - 14 Days Ago': 0,\r\n                    'Over 2 Weeks Ago': 0,\r\n                    'Over 1 Month Ago': 0\r\n                };\r\n\r\n                for (let user of theUsers) {\r\n                    let Difference_In_Days = diffDates(new Date(Date.parse(user.lastLogin)), new Date());\r\n\r\n\r\n                    if (Difference_In_Days <= 7) {\r\n                        userDates['Last 7 Days'] = userDates['Last 7 Days'] + 1\r\n                    } else if (Difference_In_Days > 7 || Difference_In_Days <= 14) {\r\n                        userDates['7 - 14 Days Ago'] = userDates['7 - 14 Days Ago'] + 1\r\n                    } else if (Difference_In_Days > 14 || Difference_In_Days <= 30) {\r\n                        userDates['Over 2 Weeks Ago'] = userDates['Over 2 Weeks Ago'] + 1\r\n                    } else {\r\n                        userDates['Over 1 Month Ago'] = userDates['Over 1 Month Ago'] + 1\r\n                    }\r\n                }\r\n                console.log(\"setPieData\", userDates);\r\n                setPieData(userDates);\r\n\r\n            })\r\n            .catch(err => console.log(err));\r\n    };\r\n    return (\r\n        <>\r\n            <Nav />\r\n            <br></br>\r\n            <MDBContainer>\r\n\r\n\r\n                <MDBRow>\r\n                    <MDBCol className=\"align-items-center p-2\" sm=\"12\" md=\"6\" lg=\"4\">\r\n                        <h1 className=\"userStats align-center\">User List</h1>\r\n                        <div>\r\n                            <MDBListGroup className=\"d-flex\" style={{ width: \"16rem\", margin: \"auto\" }}>\r\n                                {\r\n                                    _users.map(user => (\r\n                                        <MDBListGroupItem key={user._id} href={\"/users/\" + user._id} >\r\n                                            {user.firstName} {user.lastName}\r\n                                        </MDBListGroupItem>\r\n                                    )\r\n                                    )\r\n                                }\r\n                            </MDBListGroup>\r\n                        </div>\r\n                    </MDBCol>\r\n                    <MDBCol className=\"align-items-center p-2\" sm=\"12\" md=\"6\" lg=\"4\">\r\n                        <h1 className=\"userStats align-left\">User Activity</h1>\r\n                        <div>\r\n                            <MDBListGroup style={{ width: \"22rem\" }}>\r\n\r\n                                <MDBListGroupItem className=\"d-flex justify-content-between align-items-center\">Last 7 Days\r\n                            <MDBBadge color=\"primary\"\r\n                                        pill>{pieData['Last 7 Days']}</MDBBadge>\r\n                                </MDBListGroupItem>\r\n                                <MDBListGroupItem className=\"d-flex justify-content-between align-items-center\">7 - 14 Days Ago\r\n                            <MDBBadge\r\n                                        color=\"primary\" pill>{pieData['7 - 14 Days Ago']}</MDBBadge>\r\n                                </MDBListGroupItem>\r\n                                <MDBListGroupItem className=\"d-flex justify-content-between align-items-center\">Over 2 Weeks Ago\r\n                            <MDBBadge color=\"primary\"\r\n                                        pill>{pieData['Over 2 Weeks Ago']}</MDBBadge>\r\n                                </MDBListGroupItem>\r\n                                <MDBListGroupItem className=\"d-flex justify-content-between align-items-center\">Over 1 Month Ago\r\n                                 <MDBBadge color=\"primary\" pill>{pieData['Over 1 Month Ago']}</MDBBadge>\r\n                                </MDBListGroupItem>\r\n                            </MDBListGroup>\r\n                        </div>\r\n                    </MDBCol>\r\n                    <MDBCol className=\"text-center p-2\" md=\"12\" lg=\"4\" >\r\n                        <h1 className=\"userStats ml-4 text-center\">Top Saved Properties</h1>\r\n                        <BarChart\r\n                            width={450}\r\n                            height={400}\r\n                            data={properties}\r\n                            margin={{\r\n                                top: 5, right: 30, left: 20, bottom: 5,\r\n                            }}\r\n                        >\r\n                            <CartesianGrid strokeDasharray=\"3 3\" />\r\n                            <XAxis dataKey=\"name\" />\r\n                            <YAxis />\r\n                            <Tooltip />\r\n                            <Legend />\r\n                            <Bar dataKey=\"listprice\" fill=\"#8884d8\" />\r\n                            {/* <Bar dataKey=\"Yesterday\" fill=\"#82ca9d\" /> */}\r\n                        </BarChart>\r\n\r\n                    </MDBCol>\r\n                </MDBRow>\r\n            </MDBContainer>\r\n        </>\r\n    );\r\n\r\n}\r\n\r\n\r\n\r\nexport default AdminArea;\r\n"]},"metadata":{},"sourceType":"module"}